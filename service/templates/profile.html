{% extends "layout.html" %}
{% load static %}

{% block title %}Profile — Freelango{% endblock %}
{% block content %}
{% include 'navbar.html' %}

<main class="w-full flex flex-col items-center justify-center py-28 px-6">
  <div class="max-w-4xl w-full rounded-2xl border border-gray-200 bg-white shadow-md p-10">

    <!-- Header -->
    <div class="flex flex-col md:flex-row items-center justify-between mb-10 w-full">
      <div class="flex items-center gap-5">
        <!-- Avatar -->
        <div class="relative group">
          <div class="h-24 w-24 rounded-xl border border-gray-200 overflow-hidden bg-gray-100">
            {% if profile.image %}
              <img id="profilePreview" src="{{ profile.image.url }}" alt="Profile Picture" class="w-full h-full object-cover">
            {% else %}
              <img id="profilePreview" src="{% static 'img/user.png' %}" alt="Default Avatar" class="w-full h-full object-cover opacity-80">
            {% endif %}
          </div>
        </div>

        <!-- Name -->
        <div>
          <h1 class="text-3xl font-bold text-gray-900">{{ profile.user.get_full_name }}</h1>
          <p class="text-gray-500 mt-1 text-sm">Personal Information</p>
        </div>
      </div>

      <!-- Edit Button -->
      {% if request.user.id == profile.user.id %}
      <a href="{% url 'edit_profile' user.id %}"
         class="mt-6 md:mt-0 inline-flex items-center justify-center px-5 py-2.5 rounded-lg bg-indigo-600 text-white font-medium hover:bg-indigo-700 transition">
        Edit Profile
      </a>
      {% endif %}
    </div>

    <!-- Profile Info -->
    <div class="grid md:grid-cols-2 gap-6 text-gray-800">
      <div>
        <p class="text-sm text-gray-500 mb-1">Username</p>
        <p class="text-base font-medium">{{ profile.user.username }}</p>
      </div>

      <div>
        <p class="text-sm text-gray-500 mb-1">Email</p>
        <p class="text-base font-medium">{{ profile.email|default:profile.user.email }}</p>
      </div>

      <div>
        <p class="text-sm text-gray-500 mb-1">Birthday</p>
        <p class="text-base font-medium">
          {% if profile.birthday %}{{ profile.birthday|date:"j F Y" }}{% else %}-{% endif %}
        </p>
      </div>

      <div>
        <p class="text-sm text-gray-500 mb-1">Phone</p>
        <p class="text-base font-medium">{{ profile.phone_number|default:"-" }}</p>
      </div>

      <div class="md:col-span-2">
        <p class="text-sm text-gray-500 mb-1">Address</p>
        <p class="text-base font-medium">{{ profile.address|default:"-" }}</p>
      </div>

      <div class="md:col-span-2">
        <p class="text-sm text-gray-500 mb-1">About</p>
        <p class="text-base font-medium">{{ profile.description|default:"ยังไม่มีคำอธิบายโปรไฟล์" }}</p>
      </div>
    </div>
  </div>
</main>
{% endblock %}
