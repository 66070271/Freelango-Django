{% load group_tags %}
<nav class="fixed top-0 left-0 w-full z-50 bg-white border-b border-gray-200 shadow-sm">
  <div class="max-w-7xl mx-auto px-6 flex items-center justify-between h-16">

    <!-- Logo -->
    <a href="{% url 'home' %}" class="flex items-center gap-2 text-indigo-600 font-semibold text-lg">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="h-6 w-6">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
          d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm-8-6c3-3 13-7 18-6m-2 10c-3 3-13 7-18 6" />
      </svg>
      FreeLango
    </a>

    <!-- Menu -->
    <div class="hidden md:flex items-center gap-6 text-gray-600 text-sm font-medium">
      <a href="#" class="hover:text-indigo-600 transition">About</a>
      <a href="#" class="hover:text-indigo-600 transition">Contact</a>
    </div>

    <!-- Auth Section -->
    {% if user.is_authenticated %}
    <!-- ✅ Logged in -->
    <div class="relative">
      <!-- Button -->
      <button class="peer flex items-center gap-2 text-gray-800 hover:text-indigo-600 focus:outline-none font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.654 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        {{ user.username }}
        <svg class="h-4 w-4 mt-0.5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>

      <!-- Dropdown -->
      <div
        class="absolute right-0 mt-2 hidden peer-hover:flex peer-focus:flex hover:flex flex-col bg-white border border-gray-200 rounded-lg shadow-lg w-44 z-50 text-sm">
        {% if user|in_group:"Client" or user|in_group:"Freelancer" %}
        <a href="{% url 'profile_view' user.id %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-t-lg">
          Profile
        </a>
        <a href="{% url 'change_password'%}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-t-lg">
          Change password
        </a>
        {% endif %}
        {% if user|in_group:"Client" %}
        <a href="{% url 'order_list' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
          My Orders
        </a>
        {% elif user|in_group:"Freelancer" %}
        <a href="{% url 'work_list' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
          My Works
        </a>
        {% endif %}
        <a href="{% url 'logout' %}"
          class="block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-b-lg border-t border-gray-100">
          Logout
        </a>
      </div>
    </div>

    {% else %}
    <!-- ❌ Not logged in -->
    <a href="{% url 'login' %}"
      class="px-4 py-2 rounded-lg bg-indigo-600 text-white text-sm font-medium shadow hover:bg-indigo-700 transition">
      Login
    </a>
    {% endif %}
  </div>
</nav>
